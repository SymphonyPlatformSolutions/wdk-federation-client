id: federation-rename-room
activities:
- send-message:
    id: renameRoom
    on:
      message-received:
        content: /rename-room
    content: |
      <form id="renameRoom">
        <text-field name="streamId" placeholder="Stream ID" />
        <text-field name="newRoomName" placeholder="New Room Name" />
        <button name="rename">Rename Room</button>
      </form>

- rename-connect-room:
    id: executeRenameRoom
    on:
      form-replied:
        form-id: renameRoom
    stream-id: ${renameRoom.streamId}
    new-room-name: ${renameRoom.newRoomName}

- update-message:
    id: report
    message-id: ${event.source.formMessageId}
    on:
      form-replied:
        form-id: renameRoom
    content: |
      Room
      <b>${executeRenameRoom.outputs.rooms.oldRoomName}</b>
      is now
      <b>${executeRenameRoom.outputs.rooms.newRoomName}</b>
